<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸ“– Quran Explorer</title>

  <!-- âœ… Link your external stylesheet -->
  <link rel="stylesheet" href="style.css" />

  <!-- âœ… Urdu Font (for proper Nastaliq rendering) -->
  <link href="https://fonts.googleapis.com/css2?family=Noto+Nastaliq+Urdu&display=swap" rel="stylesheet">

  <!-- âœ… Add this inline style -->
  <style>
    .urdu {
      font-family: 'Noto Nastaliq Urdu', serif;
      direction: rtl;
      unicode-bidi: bidi-override;
      font-size: 18px;
    }
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>

</head>

<body>
  <header>
    <h1>ğŸ“– Quran Explorer</h1>
  </header>

  <div id="navBar" style="display:flex; justify-content:space-between; align-items:center; background:#f3f3f3; padding:10px 15px;">
    <h2 style="margin:0;">ğŸ“˜ Quran App</h2>
    <div>
      <button id="homeBtn">ğŸ  Home</button>
      <button id="bookmarksBtn">â­ Bookmarks</button>
    </div>
  </div>

  <main>
    <!-- PAGE 1: SURAH LIST -->
    <section id="surahListPage">
      <ul id="surahList"></ul>
    </section>

    <!-- PAGE 2: SURAH DETAILS -->
    <section id="surahDetailPage" style="display:none;">
      <button id="backBtn">â¬… Back</button>
      <h2 id="surahTitle"></h2>
      <div id="ayatContainer"></div>
    </section>

    <!-- PAGE 3: BOOKMARKS -->
    <section id="bookmarksPage" style="display:none;">
      <button id="backFromBookmarks">â¬… Back</button>
      <h2>â­ Bookmarked Ayahs</h2>
      <div id="bookmarkedAyahs"></div>
    </section>
  </main>

  <footer>
    <p>Developed with â¤ï¸ â€” Quran Explorer</p>
  </footer>

  <!-- âœ… External JS file -->
  <script src="script.js"></script>

  <!-- âœ… Add this helper at the end of HTML (for testing directly) -->
  <script>
    function toUrduNumber(num) {
      const urduDigits = ['Û°','Û±','Û²','Û³','Û´','Ûµ','Û¶','Û·','Û¸','Û¹'];
      return num.toString().split('').map(d => urduDigits[d]).join('');
    }

    // Example (you can remove this later)
    document.addEventListener("DOMContentLoaded", () => {
      const test = document.createElement("div");
      test.className = "urdu";
      test.textContent = "Example Urdu Numbers: " + toUrduNumber(1234567890);
      document.body.appendChild(test);
    });
  </script>
</body>
</html>




body {
  font-family: "Segoe UI", sans-serif;
  background: #f7f7f7;
  color: #222;
  margin: 0;
  padding: 0;
}

header {
  background: #1b5e20;
  color: white;
  padding: 15px;
  text-align: center;
}

#surahList {
  list-style: none;
  padding: 0;
  margin: 0;
}

#surahList li {
  background: white;
  margin: 8px auto;
  padding: 15px;
  width: 90%;
  border-radius: 8px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  cursor: pointer;
  transition: 0.3s;
}
#surahList li:hover { background: #e8f5e9; }

#surahTitle {
  text-align: center;
  font-size: 1.3em;
  margin: 15px 0;
}



.surah-item {
  padding: 10px;
  border-bottom: 1px solid #ddd;
  cursor: pointer;
  transition: background 0.2s;
}
.surah-item:hover {
  background: #f9f9f9;
}

.ayah {
  background: #fff;
  padding: 12px;
  border-radius: 10px;
  margin-bottom: 10px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

button {
  cursor: pointer;
}

#ayatContainer {
  padding: 10px 20px;
}

.ayah {
  background: white;
  margin-bottom: 12px;
  padding: 15px;
  border-radius: 8px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.arabic {
  direction: rtl;
  text-align: right;
  color: #00695c;
  font-size: 1.2em;
}

.urdu-number {
  font-family: 'Noto Nastaliq Urdu', serif;
  direction: rtl;
  unicode-bidi: bidi-override;
  font-size: 20px;
  color: #1a237e;
  width: 40px;
  text-align: center;
}
.roman, .english {
  margin-top: 5px;
  font-size: 0.95em;
  color: #444;
}

/* --- Urdu & English numbering layout --- */
.surah-row {
  display: flex;
  justify-content: space-between;
  align-items: center;
  background: white;
  margin: 8px auto;
  padding: 12px 15px;
  width: 90%;
  border-radius: 8px;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  transition: 0.3s;
  cursor: pointer;
}

.surah-row:hover {
  background: #e8f5e9;
}

.en-number {
  font-weight: bold;
  color: #1b5e20;
  width: 40px;
}

.surah-name {
  flex: 1;
  text-align: center;
}

.surah-name .urdu {
  display: block;
  font-family: 'Noto Nastaliq Urdu', serif;
  direction: rtl;
  unicode-bidi: bidi-override;
  font-size: 1.1em;
  color: #1a237e;
}

.urdu-number {
  font-family: 'Noto Nastaliq Urdu', serif;
  direction: rtl;
  unicode-bidi: bidi-override;
  font-size: 20px;
  color: #1a237e;
  width: 40px;
  text-align: center;
}

#backBtn {
  margin: 10px;
  padding: 8px 16px;
  background: #1b5e20;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
}
#backBtn:hover { background: #2e7d32; }

/* Ensure Ayah text wraps properly */
.arabic,
.urdu,
.roman,
.english {
    white-space: pre-wrap;       /* preserves spaces and wraps lines */
    word-wrap: break-word;       /* breaks long words if needed */
    overflow-wrap: break-word;   /* modern alternative for word-wrap */
    width: 100%;                 /* ensures full container width */
}
footer {
  text-align: center;
  background: #eee;
  padding: 10px;
  font-size: 0.9em;
}




// === SURAH INFO (names with Urdu) ===
// Convert English numbers to Urdu digits
function toUrduNumber(num) {
  const urduDigits = ['Û°','Û±','Û²','Û³','Û´','Ûµ','Û¶','Û·','Û¸','Û¹'];
  return num.toString().replace(/\d/g, d => urduDigits[d]);
}

const surahNames = [
   { no: 1, en: "Al-Fatiha", ur: "Ø³ÙˆØ±Ø© Ø§Ù„ÙØ§ØªØ­Û", noUr: "Ù¡" },
  { no: 2, en: "Al-Baqarah", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù‚Ø±Ø©", noUr: "Ù¢" },
  { no: 3, en: "Aal-E-Imran", ur: "Ø³ÙˆØ±Ø© Ø¢Ù„ Ø¹Ù…Ø±Ø§Ù†", noUr: "Ù£" },
  { no: 4, en: "An-Nisa", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù†Ø³Ø§Ø¡", noUr: "Ù¤" },
  { no: 5, en: "Al-Ma'idah", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø§Ø¦Ø¯Ø©", noUr: "Ù¥" },
  { no: 6, en: "Al-An'am", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø£Ù†Ø¹Ø§Ù…", noUr: "Ù¦" },
  { no: 7, en: "Al-A'raf", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø£Ø¹Ø±Ø§Ù", noUr: "Ù§" },
  { no: 8, en: "Al-Anfal", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø£Ù†ÙØ§Ù„", noUr: "Ù¨" },
  { no: 9, en: "At-Tawbah", ur: "Ø³ÙˆØ±Ø© Ø§Ù„ØªÙˆØ¨Ø©", noUr: "Ù©" },
  { no: 10, en: "Yunus", ur: "Ø³ÙˆØ±Ø© ÙŠÙˆÙ†Ø³", noUr: "Ù¡Ù " },
  { no: 11, en: "Hud", ur: "Ø³ÙˆØ±Ø© Ù‡ÙˆØ¯", noUr: "Ù¡Ù¡" },
  { no: 12, en: "Yusuf", ur: "Ø³ÙˆØ±Ø© ÙŠÙˆØ³Ù", noUr: "Ù¡Ù¢" },
  { no: 13, en: "Ar-Ra'd", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø±Ø¹Ø¯", noUr: "Ù¡Ù£" },
  { no: 14, en: "Ibrahim", ur: "Ø³ÙˆØ±Ø© Ø¥Ø¨Ø±Ø§Ù‡ÙŠÙ…", noUr: "Ù¡Ù¤" },
  { no: 15, en: "Al-Hijr", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø­Ø¬Ø±", noUr: "Ù¡Ù¥" },
  { no: 16, en: "An-Nahl", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù†Ø­Ù„", noUr: "Ù¡Ù¦" },
  { no: 17, en: "Al-Isra", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¥Ø³Ø±Ø§Ø¡", noUr: "Ù¡Ù§" },
  { no: 18, en: "Al-Kahf", ur: "Ø³ÙˆØ±Ø© Ø§Ù„ÙƒÙ‡Ù", noUr: "Ù¡Ù¨" },
  { no: 19, en: "Maryam", ur: "Ø³ÙˆØ±Ø© Ù…Ø±ÙŠÙ…", noUr: "Ù¡Ù©" },
  { no: 20, en: "Taha", ur: "Ø³ÙˆØ±Ø© Ø·Ù‡", noUr: "Ù¢Ù " },
  { no: 21, en: "Al-Anbiya", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø£Ù†Ø¨ÙŠØ§Ø¡", noUr: "Ù¢Ù¡" },
  { no: 22, en: "Al-Hajj", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø­Ø¬", noUr: "Ù¢Ù¢" },
  { no: 23, en: "Al-Mu'minun", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø¤Ù…Ù†ÙˆÙ†", noUr: "Ù¢Ù£" },
  { no: 24, en: "An-Nur", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù†ÙˆØ±", noUr: "Ù¢Ù¤" },
  { no: 25, en: "Al-Furqan", ur: "Ø³ÙˆØ±Ø© Ø§Ù„ÙØ±Ù‚Ø§Ù†", noUr: "Ù¢Ù¥" },
  { no: 26, en: "Ash-Shu'ara", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø´Ø¹Ø±Ø§Ø¡", noUr: "Ù¢Ù¦" },
  { no: 27, en: "An-Naml", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù†Ù…Ù„", noUr: "Ù¢Ù§" },
  { no: 28, en: "Al-Qasas", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù‚ØµØµ", noUr: "Ù¢Ù¨" },
  { no: 29, en: "Al-Ankabut", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¹Ù†ÙƒØ¨ÙˆØª", noUr: "Ù¢Ù©" },
  { no: 30, en: "Ar-Rum", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø±ÙˆÙ…", noUr: "Ù£Ù " },
  { no: 31, en: "Luqman", ur: "Ø³ÙˆØ±Ø© Ù„Ù‚Ù…Ø§Ù†", noUr: "Ù£Ù¡" },
  { no: 32, en: "As-Sajda", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø³Ø¬Ø¯Ø©", noUr: "Ù£Ù¢" },
  { no: 33, en: "Al-Ahzab", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø£Ø­Ø²Ø§Ø¨", noUr: "Ù£Ù£" },
  { no: 34, en: "Saba", ur: "Ø³ÙˆØ±Ø© Ø³Ø¨Ø£", noUr: "Ù£Ù¤" },
  { no: 35, en: "Fatir", ur: "Ø³ÙˆØ±Ø© ÙØ§Ø·Ø±", noUr: "Ù£Ù¥" },
  { no: 36, en: "Ya-Sin", ur: "Ø³ÙˆØ±Ø© ÙŠØ³", noUr: "Ù£Ù¦" },
  { no: 37, en: "As-Saffat", ur: "Ø³ÙˆØ±Ø© Ø§Ù„ØµØ§ÙØ§Øª", noUr: "Ù£Ù§" },
  { no: 38, en: "Sad", ur: "Ø³ÙˆØ±Ø© Øµ", noUr: "Ù£Ù¨" },
  { no: 39, en: "Az-Zumar", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø²Ù…Ø±", noUr: "Ù£Ù©" },
  { no: 40, en: "Ghafir", ur: "Ø³ÙˆØ±Ø© ØºØ§ÙØ±", noUr: "Ù¤Ù " },
 { no: 41, en: "Fussilat", ur: "Ø³ÙˆØ±Ø© ÙØµÙ„Øª", noUr: "Ù¤Ù¡" },
  { no: 42, en: "Ash-Shura", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø´ÙˆØ±Ù‰", noUr: "Ù¤Ù¢" },
  { no: 43, en: "Az-Zukhruf", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø²Ø®Ø±Ù", noUr: "Ù¤Ù£" },
  { no: 44, en: "Ad-Dukhan", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¯Ø®Ø§Ù†", noUr: "Ù¤Ù¤" },
  { no: 45, en: "Al-Jathiyah", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¬Ø§Ø«ÙŠØ©", noUr: "Ù¤Ù¥" },
  { no: 46, en: "Al-Ahqaf", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø£Ø­Ù‚Ø§Ù", noUr: "Ù¤Ù¦" },
  { no: 47, en: "Muhammad", ur: "Ø³ÙˆØ±Ø© Ù…Ø­Ù…Ø¯", noUr: "Ù¤Ù§" },
  { no: 48, en: "Al-Fath", ur: "Ø³ÙˆØ±Ø© Ø§Ù„ÙØªØ­", noUr: "Ù¤Ù¨" },
  { no: 49, en: "Al-Hujurat", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø­Ø¬Ø±Ø§Øª", noUr: "Ù¤Ù©" },
  { no: 50, en: "Qaf", ur: "Ø³ÙˆØ±Ø© Ù‚", noUr: "Ù¥Ù " },
  { no: 51, en: "Adh-Dhariyat", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø°Ø§Ø±ÙŠØ§Øª", noUr: "Ù¥Ù¡" },
  { no: 52, en: "At-Tur", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø·ÙˆØ±", noUr: "Ù¥Ù¢" },
  { no: 53, en: "An-Najm", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù†Ø¬Ù…", noUr: "Ù¥Ù£" },
  { no: 54, en: "Al-Qamar", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù‚Ù…Ø±", noUr: "Ù¥Ù¤" },
  { no: 55, en: "Ar-Rahman", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø±Ø­Ù…Ù†", noUr: "Ù¥Ù¥" },
  { no: 56, en: "Al-Waqia", ur: "Ø³ÙˆØ±Ø© Ø§Ù„ÙˆØ§Ù‚Ø¹Ø©", noUr: "Ù¥Ù¦" },
  { no: 57, en: "Al-Hadid", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø­Ø¯ÙŠØ¯", noUr: "Ù¥Ù§" },
  { no: 58, en: "Al-Mujadila", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø¬Ø§Ø¯Ù„Ø©", noUr: "Ù¥Ù¨" },
  { no: 59, en: "Al-Hashr", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø­Ø´Ø±", noUr: "Ù¥Ù©" },
  { no: 60, en: "Al-Mumtahina", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ù…ØªØ­Ù†Ø©", noUr: "Ù¦Ù " },
  { no: 61, en: "As-Saff", ur: "Ø³ÙˆØ±Ø© Ø§Ù„ØµÙ", noUr: "Ù¦Ù¡" },
  { no: 62, en: "Al-Jumu'ah", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¬Ù…Ø¹Ø©", noUr: "Ù¦Ù¢" },
  { no: 63, en: "Al-Munafiqun", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ù†Ø§ÙÙ‚ÙˆÙ†", noUr: "Ù¦Ù£" },
  { no: 64, en: "At-Taghabun", ur: "Ø³ÙˆØ±Ø© Ø§Ù„ØªØºØ§Ø¨Ù†", noUr: "Ù¦Ù¤" },
  { no: 65, en: "At-Talaq", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø·Ù„Ø§Ù‚", noUr: "Ù¦Ù¥" },
  { no: 66, en: "At-Tahrim", ur: "Ø³ÙˆØ±Ø© Ø§Ù„ØªØ­Ø±ÙŠÙ…", noUr: "Ù¦Ù¦" },
  { no: 67, en: "Al-Mulk", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ù„Ùƒ", noUr: "Ù¦Ù§" },
  { no: 68, en: "Al-Qalam", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù‚Ù„Ù…", noUr: "Ù¦Ù¨" },
  { no: 69, en: "Al-Haqqah", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø­Ø§Ù‚Ø©", noUr: "Ù¦Ù©" },
  { no: 70, en: "Al-Ma'arij", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø¹Ø§Ø±Ø¬", noUr: "Ù§Ù " },
  { no: 71, en: "Nuh", ur: "Ø³ÙˆØ±Ø© Ù†ÙˆØ­", noUr: "Ù§Ù¡" },
  { no: 72, en: "Al-Jinn", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¬Ù†", noUr: "Ù§Ù¢" },
  { no: 73, en: "Al-Muzzammil", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø²Ù…Ù„", noUr: "Ù§Ù£" },
  { no: 74, en: "Al-Muddaththir", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø¯Ø«Ø±", noUr: "Ù§Ù¤" },
  { no: 75, en: "Al-Qiyamah", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù‚ÙŠØ§Ù…Ø©", noUr: "Ù§Ù¥" },
  { no: 76, en: "Al-Insan", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¥Ù†Ø³Ø§Ù†", noUr: "Ù§Ù¦" },
  { no: 77, en: "Al-Mursalat", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø±Ø³Ù„Ø§Øª", noUr: "Ù§Ù§" },
  { no: 78, en: "An-Naba", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù†Ø¨Ø£", noUr: "Ù§Ù¨" },
  { no: 79, en: "An-Nazi'at", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù†Ø§Ø²Ø¹Ø§Øª", noUr: "Ù§Ù©" },
  { no: 80, en: "Abasa", ur: "Ø³ÙˆØ±Ø© Ø¹Ø¨Ø³", noUr: "Ù¨Ù " },
  { no: 81, en: "At-Takwir", ur: "Ø³ÙˆØ±Ø© Ø§Ù„ØªÙƒÙˆÙŠØ±", noUr: "Ù¨Ù¡" },
  { no: 82, en: "Al-Infitar", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¥Ù†ÙØ·Ø§Ø±", noUr: "Ù¨Ù¢" },
  { no: 83, en: "Al-Mutaffifin", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø·ÙÙÙŠÙ†", noUr: "Ù¨Ù£" },
  { no: 84, en: "Al-Inshiqaq", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¥Ù†Ø´Ù‚Ø§Ù‚", noUr: "Ù¨Ù¤" },
  { no: 85, en: "Al-Buruj", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ø±ÙˆØ¬", noUr: "Ù¨Ù¥" },
  { no: 86, en: "At-Tariq", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø·Ø§Ø±Ù‚", noUr: "Ù¨Ù¦" },
  { no: 87, en: "Al-A'la", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø£Ø¹Ù„Ù‰", noUr: "Ù¨Ù§" },
  { no: 88, en: "Al-Ghashiyah", ur: "Ø³ÙˆØ±Ø© Ø§Ù„ØºØ§Ø´ÙŠØ©", noUr: "Ù¨Ù¨" },
  { no: 89, en: "Al-Fajr", ur: "Ø³ÙˆØ±Ø© Ø§Ù„ÙØ¬Ø±", noUr: "Ù¨Ù©" },
  { no: 90, en: "Al-Balad", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¨Ù„Ø¯", noUr: "Ù©Ù " },
  { no: 91, en: "Ash-Shams", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø´Ù…Ø³", noUr: "Ù©Ù¡" },
  { no: 92, en: "Al-Lail", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù„ÙŠÙ„", noUr: "Ù©Ù¢" },
  { no: 93, en: "Ad-Duha", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¶Ø­Ù‰", noUr: "Ù©Ù£" },
  { no: 94, en: "Ash-Sharh", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø´Ø±Ø­", noUr: "Ù©Ù¤" },
  { no: 95, en: "At-Tin", ur: "Ø³ÙˆØ±Ø© Ø§Ù„ØªÙŠÙ†", noUr: "Ù©Ù¥" },
  { no: 96, en: "Al-Alaq", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¹Ù„Ù‚", noUr: "Ù©Ù¦" },
  { no: 97, en: "Al-Qadr", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù‚Ø¯Ø±", noUr: "Ù©Ù§" },
  { no: 98, en: "Al-Bayyina", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¨ÙŠÙ†Ø©", noUr: "Ù©Ù¨" },
  { no: 99, en: "Az-Zalzalah", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø²Ù„Ø²Ù„Ø©", noUr: "Ù©Ù©" },
  { no: 100, en: "Al-Adiyat", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¹Ø§Ø¯ÙŠØ§Øª", noUr: "Ù¡Ù Ù " },
  { no: 101, en: "Al-Qari'ah", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù‚Ø§Ø±Ø¹Ø©", noUr: "Ù¡Ù Ù¡" },
  { no: 102, en: "At-Takathur", ur: "Ø³ÙˆØ±Ø© Ø§Ù„ØªÙƒØ§Ø«Ø±", noUr: "Ù¡Ù Ù¢" },
  { no: 103, en: "Al-Asr", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¹ØµØ±", noUr: "Ù¡Ù Ù£" },
  { no: 104, en: "Al-Humazah", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù‡Ù…Ø²Ø©", noUr: "Ù¡Ù Ù¤" },
  { no: 105, en: "Al-Fil", ur: "Ø³ÙˆØ±Ø© Ø§Ù„ÙÙŠÙ„", noUr: "Ù¡Ù Ù¥" },
  { no: 106, en: "Quraysh", ur: "Ø³ÙˆØ±Ø© Ù‚Ø±ÙŠØ´", noUr: "Ù¡Ù Ù¦" },
  { no: 107, en: "Al-Ma'un", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø§Ø¹ÙˆÙ†", noUr: "Ù¡Ù Ù§" },
  { no: 108, en: "Al-Kawthar", ur: "Ø³ÙˆØ±Ø© Ø§Ù„ÙƒÙˆØ«Ø±", noUr: "Ù¡Ù Ù¨" },
  { no: 109, en: "Al-Kafirun", ur: "Ø³ÙˆØ±Ø© Ø§Ù„ÙƒØ§ÙØ±ÙˆÙ†", noUr: "Ù¡Ù Ù©" },
  { no: 110, en: "An-Nasr", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù†ØµØ±", noUr: "Ù¡Ù¡Ù " },
  { no: 111, en: "Al-Masad", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù…Ø³Ø¯", noUr: "Ù¡Ù¡Ù¡" },
  { no: 112, en: "Al-Ikhlas", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ø¥Ø®Ù„Ø§Øµ", noUr: "Ù¡Ù¡Ù¢" },
  { no: 113, en: "Al-Falaq", ur: "Ø³ÙˆØ±Ø© Ø§Ù„ÙÙ„Ù‚", noUr: "Ù¡Ù¡Ù£" },
  { no: 114, en: "An-Naas", ur: "Ø³ÙˆØ±Ø© Ø§Ù„Ù†Ø§Ø³", noUr: "Ù¡Ù¡Ù¤" }
  // ... continue for all Surahs
];

// === ELEMENTS ===
const surahListPage = document.getElementById("surahListPage");
const surahDetailPage = document.getElementById("surahDetailPage");
const bookmarksPage = document.getElementById("bookmarksPage");
const surahList = document.getElementById("surahList");
const ayatContainer = document.getElementById("ayatContainer");
const surahTitle = document.getElementById("surahTitle");
const bookmarkedAyahs = document.getElementById("bookmarkedAyahs");

const backBtn = document.getElementById("backBtn");
const backFromBookmarks = document.getElementById("backFromBookmarks");
const homeBtn = document.getElementById("homeBtn");
const bookmarksBtn = document.getElementById("bookmarksBtn");

// === GOOGLE SHEET CSV LINK ===
const sheetUrl =
  "https://docs.google.com/spreadsheets/d/e/2PACX-1vSIVMfq432UPRrpgIixP-v4CXZ0W8Rg82BUdglWWhYZiWVlnAs8KJot9MhIIsEVZo2mLxyHk7MkFXfG/pub?output=csv";

// === GLOBAL DATA CACHE ===
let data = [];

async function fetchSheetData() {
  const res = await fetch(sheetUrl);
  const text = await res.text();

  return new Promise((resolve) => {
    Papa.parse(text, {
      header: true,
      skipEmptyLines: true,
      dynamicTyping: true,
      transformHeader: h => h.trim(),   // âœ… trim headers
      complete: (results) => resolve(results.data)
    });
  });
}

// === Load Surah List ===
function loadSurahList() {
  surahList.innerHTML = "";
  surahNames.forEach((s, i) => {
    const li = document.createElement("li");
    li.className = "surah-item";
li.innerHTML = `
  <div class="surah-row">
    <span class="en-number">${s.no}</span>
    <div class="surah-name">
      <span>${s.en}</span>
      <span class="urdu">${s.ur}</span>
    </div>
    <span class="urdu-number">${toUrduNumber(s.no)}</span>
  </div>
`;

    li.addEventListener("click", () => loadSurahDetails(i + 1, s.en));
    surahList.appendChild(li);
  });
}

async function loadSurahDetails(surahId, surahName) {
  surahListPage.style.display = "none";
  surahDetailPage.style.display = "block";
  bookmarksPage.style.display = "none";
  surahTitle.innerHTML = `<b>ğŸ“˜ Surah ${surahName}</b>`;
  ayatContainer.innerHTML = "<p>Loading...</p>";

  if (!data.length) {
    data = await fetchSheetData();
  }

  const surahAyat = data.filter(
    v => v.SURAH.trim().toLowerCase() === surahName.trim().toLowerCase()
  );

  if (!surahAyat.length) {
    ayatContainer.innerHTML = `<p>No verses found for Surah ${surahName}.</p>`;
    return;
  }

  ayatContainer.innerHTML = "";

  surahAyat.forEach(v => {
    const key = `${v.SURAH}_${v.AYAT}`;
    const isBookmarked = localStorage.getItem(key);

    const div = document.createElement("div");
    div.className = "ayah";

    // Header
    const header = document.createElement("div");
    header.className = "ayah-header";
    header.style.display = "flex";
    header.style.justifyContent = "space-between";
    header.style.alignItems = "center";
    header.innerHTML = `<strong>${v.SURAH} â€” Ayah ${v.AYAT}</strong>
      <button class="bookmark-btn" data-key="${key}" style="border:none; background:none; font-size:18px; cursor:pointer;">
        ${isBookmarked ? "â­" : "â˜†"}
      </button>`;
    div.appendChild(header);

    // Arabic
    const arabicDiv = document.createElement("div");
    arabicDiv.className = "arabic";
    arabicDiv.style.fontSize = "22px";
    arabicDiv.style.textAlign = "right";
    arabicDiv.style.marginTop = "10px";
    arabicDiv.style.whiteSpace = "pre-wrap";
    arabicDiv.textContent = v.ARABIC;
    div.appendChild(arabicDiv);

    // Urdu
    const urduDiv = document.createElement("div");
    urduDiv.className = "urdu";
    urduDiv.style.fontFamily = "'Noto Nastaliq Urdu', serif";
    urduDiv.style.direction = "rtl";
    urduDiv.style.textAlign = "right";
    urduDiv.style.fontSize = "20px";
    urduDiv.style.marginTop = "10px";
    urduDiv.style.whiteSpace = "pre-wrap"; // preserves line breaks
    urduDiv.textContent = v.URDU;
    div.appendChild(urduDiv);

    // Roman Urdu
    const romanDiv = document.createElement("div");
    romanDiv.className = "roman";
    romanDiv.style.marginTop = "10px";
    romanDiv.style.whiteSpace = "pre-wrap";
    romanDiv.textContent = "Roman Urdu: " + v["ROMAN URDU"];
    div.appendChild(romanDiv);

    // English
    const englishDiv = document.createElement("div");
    englishDiv.className = "english";
    englishDiv.style.marginTop = "5px";
    englishDiv.style.whiteSpace = "pre-wrap";
    englishDiv.textContent = "English: " + v.ENGLISH;
    div.appendChild(englishDiv);

    ayatContainer.appendChild(div);
  });

  // Bookmark toggle
  document.querySelectorAll(".bookmark-btn").forEach(btn => {
    btn.addEventListener("click", e => {
      const key = e.target.dataset.key;
      if (localStorage.getItem(key)) {
        localStorage.removeItem(key);
        e.target.textContent = "â˜†";
      } else {
        localStorage.setItem(key, "true");
        e.target.textContent = "â­";
      }
    });
  });
}
// === Load Bookmarked Ayahs ===
async function loadBookmarks() {
  bookmarksPage.style.display = "block";
  surahListPage.style.display = "none";
  surahDetailPage.style.display = "none";
  bookmarkedAyahs.innerHTML = "<p>Loading...</p>";

  if (!data.length) {
    data = await fetchSheetData();
  }

  const keys = Object.keys(localStorage).filter(k => k.includes("_"));
  if (!keys.length) {
    bookmarkedAyahs.innerHTML = "<p>No bookmarked ayahs yet.</p>";
    return;
  }

  bookmarkedAyahs.innerHTML = "";
  keys.forEach(key => {
    const [surah, ayah] = key.split("_");
    const verse = data.find(v => v.SURAH === surah && v.AYAT === ayah);
    if (verse) {
      const div = document.createElement("div");
      div.className = "ayah";
      div.innerHTML = `
        <div style="display:flex; justify-content:space-between; align-items:center;">
          <strong>${verse.SURAH} â€” Ayah ${verse.AYAT}</strong>
          <button class="remove-bookmark" data-key="${key}" style="border:none; background:none; color:red; font-size:16px; cursor:pointer;">âŒ</button>
        </div>

        <div class="arabic" style="
          font-size:22px;
          text-align:right;
          margin-top:5px;
          white-space: pre-wrap;
          word-wrap: break-word;
          overflow-wrap: break-word;
        ">${verse.ARABIC}</div>

        <div class="urdu" style="
          font-family:'Noto Nastaliq Urdu', serif;
          direction:rtl;
          text-align:right;
          font-size:20px;
          margin-top:5px;
          white-space: pre-wrap;
          word-wrap: break-word;
          overflow-wrap: break-word;
        ">${verse.URDU}</div>

        <div class="roman" style="
          margin-top:5px;
          white-space: pre-wrap;
          word-wrap: break-word;
          overflow-wrap: break-word;
        "><b>Roman Urdu:</b> ${verse["ROMAN URDU"]}</div>

        <div class="english" style="
          margin-top:5px;
          white-space: pre-wrap;
          word-wrap: break-word;
          overflow-wrap: break-word;
        "><b>English:</b> ${verse.ENGLISH}</div>

        <button class="open-surah" data-surah="${verse.SURAH}" style="margin-top:8px;">ğŸ“– Open Surah</button>
        <hr>
      `;
      bookmarkedAyahs.appendChild(div);
    }
  });

  // Handle remove + open
  document.querySelectorAll(".remove-bookmark").forEach(btn =>
    btn.addEventListener("click", e => {
      const key = e.target.dataset.key;
      localStorage.removeItem(key);
      loadBookmarks();
    })
  );

  document.querySelectorAll(".open-surah").forEach(btn =>
    btn.addEventListener("click", e => {
      const surahName = e.target.dataset.surah;
      loadSurahDetails(1, surahName);
    })
  );
}

// === Navigation Buttons ===
homeBtn.addEventListener("click", () => {
  surahListPage.style.display = "block";
  surahDetailPage.style.display = "none";
  bookmarksPage.style.display = "none";
});
bookmarksBtn.addEventListener("click", loadBookmarks);
backBtn.addEventListener("click", () => {
  surahListPage.style.display = "block";
  surahDetailPage.style.display = "none";
});
backFromBookmarks.addEventListener("click", () => {
  surahListPage.style.display = "block";
  bookmarksPage.style.display = "none";
});

// === Initialize ===
(async () => {
  data = await fetchSheetData();
  loadSurahList();
})();